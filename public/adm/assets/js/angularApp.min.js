var app=angular.module("myApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination","ngFileUpload"]);app.config(["$routeProvider","$locationProvider",function(e,o){o.hashPrefix(""),e.when("/",{}).when("/dashboard",{templateUrl:"dashboard",controller:"dashboardController"}).when("/gallery",{templateUrl:"gallery",controller:"galleryController"}).when("/portfolio",{templateUrl:"portfolio",controller:"portfolioController"}).when("/user-profile",{templateUrl:"change"})}]),app.filter("startFrom",function(){return function(e,o){return o=+o,e.slice(o)}}),app.directive("ngConfirmClick",[function(){return{link:function(e,o,a){var t=a.ngConfirmClick||"Are you sure?",n=a.confirmedClick;o.bind("click",function(o){window.confirm(t)&&e.$eval(n)})}}}]),app.controller("adminController",["$scope","$location","$http","$rootScope","$filter","$window","uibDateParser","$uibModal","$log","$document",function(e,o,a,t,n,l,r,i,s,d){function u(){var o=t.base_url+"admin/user";a.get(o).then(function(o){o.data&&(e.curuser=o.data.username,e.newuser.username=e.curuser)})}function f(o,a,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:a,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){s.info("Modal dismissed at: "+new Date)})}e.error={};var c=e.baseUrl=o.protocol()+"://"+location.host+"/";t.base_url=c,t.public_url=e.baseUrl=o.protocol()+"://"+location.host,e.paginations=[5,10,20,25],e.numPerPage=10,e.user={},e.curuser={},e.newuser={},e.newuser={},t.loading=!1,e.formdisable=!1,t.loading=!1,e.format="yyyy/MM/dd",e.login=function(){console.log("login");var o=new FormData;angular.forEach(e.user,function(e,a){o.append(a,e)});var n=t.base_url+"login/verify";a.post(n,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){l.location.href=c+"admin/#/"},function(o){console.log("login error"),console.log(o.data),e.error=o.data,e.showerror=!0})},e.changeProfile=function(){t.loading=!0;var o=new FormData;angular.forEach(e.newuser,function(e,a){o.append(a,e)});var n=t.base_url+"admin/change/submit";a.post(n,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){t.loading=!1,console.log("profile changed"),e.showmsg=!0,e.formdisable=!0,f("Username and Password changed.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1},function(o){t.loading=!1,e.showerror=!0,f("Try again later.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1})},e.cancel=function(){l.location.href="/#"},e.today=function(){e.date=new Date},e.today(),e.clear=function(){e.date=null},e.inlineOptions={customClass:function(o){var a=o.date;if("day"===o.mode)for(var t=new Date(a).setHours(0,0,0,0),n=0;n<e.events.length;n++)if(t===new Date(e.events[n].date).setHours(0,0,0,0))return e.events[n].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date,e.dateOptions.minDate=e.inlineOptions.minDate},e.toggleMin(),e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.setDate=function(o,a,t){e.date=new Date(o,a,t)},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.altInputFormats=["M!/d!/yyyy"],e.popup1={opened:!1},e.popup2={opened:!1};var p=new Date;p.setDate(p.getDate()+1);var g=new Date;g.setDate(p.getDate()+1),e.events=[{date:p,status:"full"},{date:g,status:"partially"}]}]),app.controller("galleryController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,o,a,t,n,l,r,i,s,d){function u(){o.get(a.base_url+"admin/gallery/get").then(function(o){console.log(o.data),o.data?(e.galleries=o.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.galleries=[],e.newgallery={},e.curgallery={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},a.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newGallery=function(){e.newgallery={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.showForm=function(o){console.log(o),e.showform=!0,e.curgallery=o,e.newgallery=angular.copy(o),e.item_files=o.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addGallery=function(){a.loading=!0;var t=new FormData;if(angular.forEach(e.newgallery,function(e,o){t.append(o,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newgallery.id){n=a.base_url+"admin/gallery/edit/"+e.newgallery.id;o.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newgallery={},e.showform=!1,a.loading=!1,e.files=""},function(o){console.log("edit Error :- Status :"+o.status+"data : "+o.data),a.loading=!1,e.files=""})}else{var n=a.base_url+"admin/gallery/add";o.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newgallery={},e.showform=!1,a.loading=!1,e.files=""},function(o){console.log("addError :- Status :"+o.status+"data : "+o.data),console.log(o.data),a.loading=!1,e.files="",403==o.status&&(e.fileValidation.status=!0,e.fileValidation.msg=o.data.validation_error)})}},e.deleteGallery=function(t){console.log(t),a.loading=!0;var n=a.base_url+"admin/gallery/delete/"+t.id;o.delete(n).then(function(o){var n=e.galleries.indexOf(t);e.galleries.splice(n,1),alert(o.data.msg),u(),a.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),a.loading=!1})},e.uploadFiles=function(o,t){angular.forEach(t,function(o){e.errFiles.push(o)}),angular.forEach(o,function(o){e.files.push(o),o.upload=n.upload({url:a.base_url+"admin/gallery/upload",data:{file:o}}),o.upload.then(function(a){l(function(){e.uploaded.push(a.data),o.result=a.data})},function(o){o.status>0&&(e.errorMsg=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){a.loading=!0;var n=a.base_url+"admin/gallery/delete-image/"+t.id;o.delete(n).then(function(o){console.log("image deleted"),e.item_files="",u(),a.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),a.loading=!1})},e.showGalleryFiles=function(o){console.log(o),e.galleryfiles=o},e.animationsEnabled=!0,e.open=function(o,a,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:a,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){s.info("Modal dismissed at: "+new Date)})}}]),app.controller("portfolioController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,o,a,t,n,l,r,i,s,d){function u(){o.get(a.base_url+"admin/portfolio/get").then(function(o){console.log(o.data),o.data?(e.portfolios=o.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.portfolios=[],e.newportfolio={},e.curportfolio={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},a.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newPortfolio=function(){e.newportfolio={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editPortfolio=function(o){console.log(o),e.showform=!0,e.curportfolio=o,e.newportfolio=angular.copy(o),e.item_files=o.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addPortfolio=function(){a.loading=!0;var t=new FormData;if(angular.forEach(e.newportfolio,function(e,o){t.append(o,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newportfolio.id){n=a.base_url+"admin/portfolio/edit/"+e.newportfolio.id;o.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newportfolio={},e.showform=!1,a.loading=!1,e.files=""},function(o){console.log("edit Error :- Status :"+o.status+"data : "+o.data),a.loading=!1,e.files=""})}else{var n=a.base_url+"admin/portfolio/add";o.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newportfolio={},e.showform=!1,a.loading=!1,e.files=""},function(o){console.log("addError :- Status :"+o.status+"data : "+o.data),console.log(o.data),a.loading=!1,e.files="",403==o.status&&(e.fileValidation.status=!0,e.fileValidation.msg=o.data.validation_error)})}},e.deletePortfolio=function(t){console.log(t),a.loading=!0;var n=a.base_url+"admin/portfolio/delete/"+t.id;o.delete(n).then(function(o){var n=e.portfolios.indexOf(t);e.portfolios.splice(n,1),alert(o.data.msg),u(),a.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),a.loading=!1})},e.uploadFiles=function(o,t){angular.forEach(t,function(o){e.errFiles.push(o)}),angular.forEach(o,function(o){e.files.push(o),o.upload=n.upload({url:a.base_url+"admin/portfolio/upload",data:{file:o}}),o.upload.then(function(a){l(function(){e.uploaded.push(a.data),o.result=a.data})},function(o){o.status>0&&(e.errorMsg=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){a.loading=!0;var n=a.base_url+"admin/portfolio/delete-image/"+t.id;o.delete(n).then(function(o){var n=e.item_files.indexOf(t);e.item_files.splice(n,1),a.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),a.loading=!1})},e.showPortfolioFiles=function(o){console.log(o),e.portfoliofiles=o},e.animationsEnabled=!0,e.open=function(o,a,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:a,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){s.info("Modal dismissed at: "+new Date)})}}]);